{"ast":null,"code":"import { concatMap, tap } from \"rxjs/operators\";\nimport { environment } from \"../../../environments/environment\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../auth/auth.service\";\nimport * as i2 from \"../meme.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"../meme-cards/empty-meme-card/empty-meme-card.component\";\nimport * as i6 from \"../meme-cards/meme-card/meme-card.component\";\nimport * as i7 from \"../../util/pagination/pagination.component\";\n\nfunction MemeListComponent_button_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"button\", 7);\n    i0.ɵɵtext(1, \"+ Upload meme\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction MemeListComponent_ng_template_7_app_empty_meme_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-empty-meme\");\n  }\n}\n\nfunction MemeListComponent_ng_template_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtemplate(0, MemeListComponent_ng_template_7_app_empty_meme_0_Template, 1, 0, \"app-empty-meme\", 8);\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.getArray(ctx_r1.size));\n  }\n}\n\nfunction MemeListComponent_ng_template_8_app_meme_card_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-meme-card\", 11);\n  }\n\n  if (rf & 2) {\n    const meme_r8 = ctx.$implicit;\n    i0.ɵɵproperty(\"meme\", meme_r8);\n  }\n}\n\nfunction MemeListComponent_ng_template_8_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 12);\n    i0.ɵɵtext(1, \"No memes yet\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction MemeListComponent_ng_template_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtemplate(0, MemeListComponent_ng_template_8_app_meme_card_0_Template, 1, 1, \"app-meme-card\", 9);\n    i0.ɵɵtemplate(1, MemeListComponent_ng_template_8_div_1_Template, 2, 0, \"div\", 10);\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.memes);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r2.memes || !ctx_r2.memes.length);\n  }\n}\n\nfunction MemeListComponent_app_pagination_9_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"app-pagination\", 13);\n    i0.ɵɵlistener(\"nextPage\", function MemeListComponent_app_pagination_9_Template_app_pagination_nextPage_0_listener($event) {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r9 = i0.ɵɵnextContext();\n      return ctx_r9.moveToPage($event);\n    })(\"invalidPage\", function MemeListComponent_app_pagination_9_Template_app_pagination_invalidPage_0_listener() {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r11 = i0.ɵɵnextContext();\n      return ctx_r11.moveToPage(1);\n    });\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"size\", ctx_r3.size)(\"currentPage\", ctx_r3.currentPage)(\"elementsCount\", ctx_r3.memesCount);\n  }\n}\n\nexport class MemeListComponent {\n  constructor(authService, memeService, route, router) {\n    this.authService = authService;\n    this.memeService = memeService;\n    this.route = route;\n    this.router = router;\n    this.memes = [];\n    this.isLoading = true;\n    this.memesCount = 0;\n    this.currentPage = 1;\n    this.size = environment.defaultMemePageSize;\n  }\n\n  ngOnInit() {\n    this.loadMemesSub = this.route.queryParams.pipe(tap(() => {\n      this.isLoading = true;\n      window.scroll(0, 0);\n    }), tap(params => {\n      if (!params.size) {\n        this.size = environment.defaultMemePageSize;\n      } else if (+params.size >= 1) {\n        this.size = +params.size;\n      } else {\n        this.navigateToDefaultPage();\n      }\n\n      if (!params.page) {\n        this.currentPage = 1;\n      } else if (+params.page >= 1) {\n        this.currentPage = +params.page;\n      } else {\n        this.navigateToDefaultPage();\n      }\n    }), concatMap(() => {\n      return this.memeService.getMemesCount().pipe(tap(count => this.memesCount = count));\n    }), concatMap(() => {\n      return this.memeService.getMemesPage(this.currentPage - 1, this.size);\n    })).subscribe(memes => {\n      this.memes = memes;\n      this.isLoading = false;\n    });\n  }\n\n  getArray(length) {\n    return Array(length);\n  }\n\n  moveToPage(page) {\n    const pageNumber = +page;\n\n    if (!pageNumber) {\n      return;\n    }\n\n    const updatedQueryParams = {\n      size: this.size,\n      page: page\n    };\n    this.router.navigate([], {\n      relativeTo: this.route,\n      queryParams: updatedQueryParams\n    });\n  }\n\n  navigateToDefaultPage() {\n    this.router.navigate([], {\n      relativeTo: this.route\n    });\n  }\n\n  ngOnDestroy() {\n    var _a;\n\n    (_a = this.loadMemesSub) === null || _a === void 0 ? void 0 : _a.unsubscribe();\n  }\n\n}\n\nMemeListComponent.ɵfac = function MemeListComponent_Factory(t) {\n  return new (t || MemeListComponent)(i0.ɵɵdirectiveInject(i1.AuthService), i0.ɵɵdirectiveInject(i2.MemeService), i0.ɵɵdirectiveInject(i3.ActivatedRoute), i0.ɵɵdirectiveInject(i3.Router));\n};\n\nMemeListComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: MemeListComponent,\n  selectors: [[\"app-meme-list\"]],\n  decls: 10,\n  vars: 6,\n  consts: [[1, \"heading\"], [1, \"title\"], [\"class\", \"btn-create\", \"routerLink\", \"/upload\", 4, \"ngIf\"], [1, \"page-content\"], [1, \"meme-grid\"], [3, \"ngIf\"], [3, \"size\", \"currentPage\", \"elementsCount\", \"nextPage\", \"invalidPage\", 4, \"ngIf\"], [\"routerLink\", \"/upload\", 1, \"btn-create\"], [4, \"ngFor\", \"ngForOf\"], [3, \"meme\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"not-found-center\", 4, \"ngIf\"], [3, \"meme\"], [1, \"not-found-center\"], [3, \"size\", \"currentPage\", \"elementsCount\", \"nextPage\", \"invalidPage\"]],\n  template: function MemeListComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵelementStart(1, \"h1\", 1);\n      i0.ɵɵtext(2, \"Meme list\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(3, MemeListComponent_button_3_Template, 2, 0, \"button\", 2);\n      i0.ɵɵpipe(4, \"async\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(5, \"div\", 3);\n      i0.ɵɵelementStart(6, \"div\", 4);\n      i0.ɵɵtemplate(7, MemeListComponent_ng_template_7_Template, 1, 1, \"ng-template\", 5);\n      i0.ɵɵtemplate(8, MemeListComponent_ng_template_8_Template, 2, 2, \"ng-template\", 5);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(9, MemeListComponent_app_pagination_9_Template, 1, 3, \"app-pagination\", 6);\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(4, 4, ctx.authService.user));\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngIf\", ctx.isLoading);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", !ctx.isLoading);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", !ctx.isLoading && ctx.memesCount);\n    }\n  },\n  directives: [i4.NgIf, i3.RouterLink, i4.NgForOf, i5.EmptyMemeCardComponent, i6.MemeCardComponent, i7.PaginationComponent],\n  pipes: [i4.AsyncPipe],\n  styles: [\".btn-create[_ngcontent-%COMP%] {\\r\\n  padding: 0 11px;\\r\\n  height: 50px;\\r\\n  float: right;\\r\\n  background-color: var(--color-info);\\r\\n  font-size: 16px;\\r\\n  font-weight: var(--weight-medium);\\r\\n  border: 0;\\r\\n  border-radius: 10px;\\r\\n  cursor: pointer;\\r\\n}\\r\\n\\r\\n.not-found-center[_ngcontent-%COMP%] {\\r\\n  position: absolute;\\r\\n  top: 50%;\\r\\n  left: 50%;\\r\\n  transform: translate(-50%, -70%);\\r\\n  font-size: 24px;\\r\\n  font-weight: var(--weight-medium);\\r\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1lbWUtbGlzdC5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsZUFBZTtFQUNmLFlBQVk7RUFDWixZQUFZO0VBQ1osbUNBQW1DO0VBQ25DLGVBQWU7RUFDZixpQ0FBaUM7RUFDakMsU0FBUztFQUNULG1CQUFtQjtFQUNuQixlQUFlO0FBQ2pCOztBQUVBO0VBQ0Usa0JBQWtCO0VBQ2xCLFFBQVE7RUFDUixTQUFTO0VBQ1QsZ0NBQWdDO0VBQ2hDLGVBQWU7RUFDZixpQ0FBaUM7QUFDbkMiLCJmaWxlIjoibWVtZS1saXN0LmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuYnRuLWNyZWF0ZSB7XHJcbiAgcGFkZGluZzogMCAxMXB4O1xyXG4gIGhlaWdodDogNTBweDtcclxuICBmbG9hdDogcmlnaHQ7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tY29sb3ItaW5mbyk7XHJcbiAgZm9udC1zaXplOiAxNnB4O1xyXG4gIGZvbnQtd2VpZ2h0OiB2YXIoLS13ZWlnaHQtbWVkaXVtKTtcclxuICBib3JkZXI6IDA7XHJcbiAgYm9yZGVyLXJhZGl1czogMTBweDtcclxuICBjdXJzb3I6IHBvaW50ZXI7XHJcbn1cclxuXHJcbi5ub3QtZm91bmQtY2VudGVyIHtcclxuICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgdG9wOiA1MCU7XHJcbiAgbGVmdDogNTAlO1xyXG4gIHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC03MCUpO1xyXG4gIGZvbnQtc2l6ZTogMjRweDtcclxuICBmb250LXdlaWdodDogdmFyKC0td2VpZ2h0LW1lZGl1bSk7XHJcbn1cclxuIl19 */\"]\n});","map":{"version":3,"sources":["C:/Programming/suchdoge/such-doge-web/src/app/meme/meme-list/meme-list.component.ts"],"names":["concatMap","tap","environment","i0","i1","i2","i3","i4","i5","i6","i7","MemeListComponent_button_3_Template","rf","ctx","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","MemeListComponent_ng_template_7_app_empty_meme_0_Template","ɵɵelement","MemeListComponent_ng_template_7_Template","ɵɵtemplate","ctx_r1","ɵɵnextContext","ɵɵproperty","getArray","size","MemeListComponent_ng_template_8_app_meme_card_0_Template","meme_r8","$implicit","MemeListComponent_ng_template_8_div_1_Template","MemeListComponent_ng_template_8_Template","ctx_r2","memes","ɵɵadvance","length","MemeListComponent_app_pagination_9_Template","_r10","ɵɵgetCurrentView","ɵɵlistener","MemeListComponent_app_pagination_9_Template_app_pagination_nextPage_0_listener","$event","ɵɵrestoreView","ctx_r9","moveToPage","MemeListComponent_app_pagination_9_Template_app_pagination_invalidPage_0_listener","ctx_r11","ctx_r3","currentPage","memesCount","MemeListComponent","constructor","authService","memeService","route","router","isLoading","defaultMemePageSize","ngOnInit","loadMemesSub","queryParams","pipe","window","scroll","params","navigateToDefaultPage","page","getMemesCount","count","getMemesPage","subscribe","Array","pageNumber","updatedQueryParams","navigate","relativeTo","ngOnDestroy","_a","unsubscribe","ɵfac","MemeListComponent_Factory","t","ɵɵdirectiveInject","AuthService","MemeService","ActivatedRoute","Router","ɵcmp","ɵɵdefineComponent","type","selectors","decls","vars","consts","template","MemeListComponent_Template","ɵɵpipe","ɵɵpipeBind1","user","directives","NgIf","RouterLink","NgForOf","EmptyMemeCardComponent","MemeCardComponent","PaginationComponent","pipes","AsyncPipe","styles"],"mappings":"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","sourcesContent":["import { concatMap, tap } from \"rxjs/operators\";\r\nimport { environment } from \"../../../environments/environment\";\r\nimport * as i0 from \"@angular/core\";\r\nimport * as i1 from \"../../auth/auth.service\";\r\nimport * as i2 from \"../meme.service\";\r\nimport * as i3 from \"@angular/router\";\r\nimport * as i4 from \"@angular/common\";\r\nimport * as i5 from \"../meme-cards/empty-meme-card/empty-meme-card.component\";\r\nimport * as i6 from \"../meme-cards/meme-card/meme-card.component\";\r\nimport * as i7 from \"../../util/pagination/pagination.component\";\r\nfunction MemeListComponent_button_3_Template(rf, ctx) { if (rf & 1) {\r\n    i0.ɵɵelementStart(0, \"button\", 7);\r\n    i0.ɵɵtext(1, \"+ Upload meme\");\r\n    i0.ɵɵelementEnd();\r\n} }\r\nfunction MemeListComponent_ng_template_7_app_empty_meme_0_Template(rf, ctx) { if (rf & 1) {\r\n    i0.ɵɵelement(0, \"app-empty-meme\");\r\n} }\r\nfunction MemeListComponent_ng_template_7_Template(rf, ctx) { if (rf & 1) {\r\n    i0.ɵɵtemplate(0, MemeListComponent_ng_template_7_app_empty_meme_0_Template, 1, 0, \"app-empty-meme\", 8);\r\n} if (rf & 2) {\r\n    const ctx_r1 = i0.ɵɵnextContext();\r\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.getArray(ctx_r1.size));\r\n} }\r\nfunction MemeListComponent_ng_template_8_app_meme_card_0_Template(rf, ctx) { if (rf & 1) {\r\n    i0.ɵɵelement(0, \"app-meme-card\", 11);\r\n} if (rf & 2) {\r\n    const meme_r8 = ctx.$implicit;\r\n    i0.ɵɵproperty(\"meme\", meme_r8);\r\n} }\r\nfunction MemeListComponent_ng_template_8_div_1_Template(rf, ctx) { if (rf & 1) {\r\n    i0.ɵɵelementStart(0, \"div\", 12);\r\n    i0.ɵɵtext(1, \"No memes yet\");\r\n    i0.ɵɵelementEnd();\r\n} }\r\nfunction MemeListComponent_ng_template_8_Template(rf, ctx) { if (rf & 1) {\r\n    i0.ɵɵtemplate(0, MemeListComponent_ng_template_8_app_meme_card_0_Template, 1, 1, \"app-meme-card\", 9);\r\n    i0.ɵɵtemplate(1, MemeListComponent_ng_template_8_div_1_Template, 2, 0, \"div\", 10);\r\n} if (rf & 2) {\r\n    const ctx_r2 = i0.ɵɵnextContext();\r\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.memes);\r\n    i0.ɵɵadvance(1);\r\n    i0.ɵɵproperty(\"ngIf\", !ctx_r2.memes || !ctx_r2.memes.length);\r\n} }\r\nfunction MemeListComponent_app_pagination_9_Template(rf, ctx) { if (rf & 1) {\r\n    const _r10 = i0.ɵɵgetCurrentView();\r\n    i0.ɵɵelementStart(0, \"app-pagination\", 13);\r\n    i0.ɵɵlistener(\"nextPage\", function MemeListComponent_app_pagination_9_Template_app_pagination_nextPage_0_listener($event) { i0.ɵɵrestoreView(_r10); const ctx_r9 = i0.ɵɵnextContext(); return ctx_r9.moveToPage($event); })(\"invalidPage\", function MemeListComponent_app_pagination_9_Template_app_pagination_invalidPage_0_listener() { i0.ɵɵrestoreView(_r10); const ctx_r11 = i0.ɵɵnextContext(); return ctx_r11.moveToPage(1); });\r\n    i0.ɵɵelementEnd();\r\n} if (rf & 2) {\r\n    const ctx_r3 = i0.ɵɵnextContext();\r\n    i0.ɵɵproperty(\"size\", ctx_r3.size)(\"currentPage\", ctx_r3.currentPage)(\"elementsCount\", ctx_r3.memesCount);\r\n} }\r\nexport class MemeListComponent {\r\n    constructor(authService, memeService, route, router) {\r\n        this.authService = authService;\r\n        this.memeService = memeService;\r\n        this.route = route;\r\n        this.router = router;\r\n        this.memes = [];\r\n        this.isLoading = true;\r\n        this.memesCount = 0;\r\n        this.currentPage = 1;\r\n        this.size = environment.defaultMemePageSize;\r\n    }\r\n    ngOnInit() {\r\n        this.loadMemesSub = this.route.queryParams\r\n            .pipe(tap(() => {\r\n            this.isLoading = true;\r\n            window.scroll(0, 0);\r\n        }), tap(params => {\r\n            if (!params.size) {\r\n                this.size = environment.defaultMemePageSize;\r\n            }\r\n            else if (+params.size >= 1) {\r\n                this.size = +params.size;\r\n            }\r\n            else {\r\n                this.navigateToDefaultPage();\r\n            }\r\n            if (!params.page) {\r\n                this.currentPage = 1;\r\n            }\r\n            else if (+params.page >= 1) {\r\n                this.currentPage = +params.page;\r\n            }\r\n            else {\r\n                this.navigateToDefaultPage();\r\n            }\r\n        }), concatMap(() => {\r\n            return this.memeService.getMemesCount()\r\n                .pipe(tap(count => this.memesCount = count));\r\n        }), concatMap(() => {\r\n            return this.memeService.getMemesPage(this.currentPage - 1, this.size);\r\n        })).subscribe(memes => {\r\n            this.memes = memes;\r\n            this.isLoading = false;\r\n        });\r\n    }\r\n    getArray(length) {\r\n        return Array(length);\r\n    }\r\n    moveToPage(page) {\r\n        const pageNumber = +page;\r\n        if (!pageNumber) {\r\n            return;\r\n        }\r\n        const updatedQueryParams = {\r\n            size: this.size,\r\n            page: page\r\n        };\r\n        this.router.navigate([], {\r\n            relativeTo: this.route,\r\n            queryParams: updatedQueryParams\r\n        });\r\n    }\r\n    navigateToDefaultPage() {\r\n        this.router.navigate([], {\r\n            relativeTo: this.route,\r\n        });\r\n    }\r\n    ngOnDestroy() {\r\n        var _a;\r\n        (_a = this.loadMemesSub) === null || _a === void 0 ? void 0 : _a.unsubscribe();\r\n    }\r\n}\r\nMemeListComponent.ɵfac = function MemeListComponent_Factory(t) { return new (t || MemeListComponent)(i0.ɵɵdirectiveInject(i1.AuthService), i0.ɵɵdirectiveInject(i2.MemeService), i0.ɵɵdirectiveInject(i3.ActivatedRoute), i0.ɵɵdirectiveInject(i3.Router)); };\r\nMemeListComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: MemeListComponent, selectors: [[\"app-meme-list\"]], decls: 10, vars: 6, consts: [[1, \"heading\"], [1, \"title\"], [\"class\", \"btn-create\", \"routerLink\", \"/upload\", 4, \"ngIf\"], [1, \"page-content\"], [1, \"meme-grid\"], [3, \"ngIf\"], [3, \"size\", \"currentPage\", \"elementsCount\", \"nextPage\", \"invalidPage\", 4, \"ngIf\"], [\"routerLink\", \"/upload\", 1, \"btn-create\"], [4, \"ngFor\", \"ngForOf\"], [3, \"meme\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"not-found-center\", 4, \"ngIf\"], [3, \"meme\"], [1, \"not-found-center\"], [3, \"size\", \"currentPage\", \"elementsCount\", \"nextPage\", \"invalidPage\"]], template: function MemeListComponent_Template(rf, ctx) { if (rf & 1) {\r\n        i0.ɵɵelementStart(0, \"div\", 0);\r\n        i0.ɵɵelementStart(1, \"h1\", 1);\r\n        i0.ɵɵtext(2, \"Meme list\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵtemplate(3, MemeListComponent_button_3_Template, 2, 0, \"button\", 2);\r\n        i0.ɵɵpipe(4, \"async\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(5, \"div\", 3);\r\n        i0.ɵɵelementStart(6, \"div\", 4);\r\n        i0.ɵɵtemplate(7, MemeListComponent_ng_template_7_Template, 1, 1, \"ng-template\", 5);\r\n        i0.ɵɵtemplate(8, MemeListComponent_ng_template_8_Template, 2, 2, \"ng-template\", 5);\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵtemplate(9, MemeListComponent_app_pagination_9_Template, 1, 3, \"app-pagination\", 6);\r\n    } if (rf & 2) {\r\n        i0.ɵɵadvance(3);\r\n        i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(4, 4, ctx.authService.user));\r\n        i0.ɵɵadvance(4);\r\n        i0.ɵɵproperty(\"ngIf\", ctx.isLoading);\r\n        i0.ɵɵadvance(1);\r\n        i0.ɵɵproperty(\"ngIf\", !ctx.isLoading);\r\n        i0.ɵɵadvance(1);\r\n        i0.ɵɵproperty(\"ngIf\", !ctx.isLoading && ctx.memesCount);\r\n    } }, directives: [i4.NgIf, i3.RouterLink, i4.NgForOf, i5.EmptyMemeCardComponent, i6.MemeCardComponent, i7.PaginationComponent], pipes: [i4.AsyncPipe], styles: [\".btn-create[_ngcontent-%COMP%] {\\r\\n  padding: 0 11px;\\r\\n  height: 50px;\\r\\n  float: right;\\r\\n  background-color: var(--color-info);\\r\\n  font-size: 16px;\\r\\n  font-weight: var(--weight-medium);\\r\\n  border: 0;\\r\\n  border-radius: 10px;\\r\\n  cursor: pointer;\\r\\n}\\r\\n\\r\\n.not-found-center[_ngcontent-%COMP%] {\\r\\n  position: absolute;\\r\\n  top: 50%;\\r\\n  left: 50%;\\r\\n  transform: translate(-50%, -70%);\\r\\n  font-size: 24px;\\r\\n  font-weight: var(--weight-medium);\\r\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1lbWUtbGlzdC5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsZUFBZTtFQUNmLFlBQVk7RUFDWixZQUFZO0VBQ1osbUNBQW1DO0VBQ25DLGVBQWU7RUFDZixpQ0FBaUM7RUFDakMsU0FBUztFQUNULG1CQUFtQjtFQUNuQixlQUFlO0FBQ2pCOztBQUVBO0VBQ0Usa0JBQWtCO0VBQ2xCLFFBQVE7RUFDUixTQUFTO0VBQ1QsZ0NBQWdDO0VBQ2hDLGVBQWU7RUFDZixpQ0FBaUM7QUFDbkMiLCJmaWxlIjoibWVtZS1saXN0LmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuYnRuLWNyZWF0ZSB7XHJcbiAgcGFkZGluZzogMCAxMXB4O1xyXG4gIGhlaWdodDogNTBweDtcclxuICBmbG9hdDogcmlnaHQ7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tY29sb3ItaW5mbyk7XHJcbiAgZm9udC1zaXplOiAxNnB4O1xyXG4gIGZvbnQtd2VpZ2h0OiB2YXIoLS13ZWlnaHQtbWVkaXVtKTtcclxuICBib3JkZXI6IDA7XHJcbiAgYm9yZGVyLXJhZGl1czogMTBweDtcclxuICBjdXJzb3I6IHBvaW50ZXI7XHJcbn1cclxuXHJcbi5ub3QtZm91bmQtY2VudGVyIHtcclxuICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgdG9wOiA1MCU7XHJcbiAgbGVmdDogNTAlO1xyXG4gIHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC03MCUpO1xyXG4gIGZvbnQtc2l6ZTogMjRweDtcclxuICBmb250LXdlaWdodDogdmFyKC0td2VpZ2h0LW1lZGl1bSk7XHJcbn1cclxuIl19 */\"] });\r\n"]},"metadata":{},"sourceType":"module"}